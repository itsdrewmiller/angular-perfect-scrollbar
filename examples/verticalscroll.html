<!DOCTYPE HTML>
<html>

    <head>
        <link href="../bower_components/perfect-scrollbar/css/perfect-scrollbar.min.css" rel="stylesheet">

        <!-- jQuery should be provided by perfect-scrollbar's Bower dependencies -->
        <script src="../bower_components/jquery/dist/jquery.min.js"></script>
        <script src="../bower_components/angular/angular.min.js"></script>
        <script src="../bower_components/perfect-scrollbar/js/perfect-scrollbar.jquery.min.js"></script>
        <script src="../src/angular-perfect-scrollbar.js"></script>

        <style>
            .scroller {
                white-space: pre-line;
                height: 720px;
                width: 50%;
                overflow: hidden;
                position: relative;
                background: #eee;
            }

            .scroller>div {
                padding-right: 15px;
            }

        </style>
    </head>

    <body ng-app="myApp" ng-controller="ScrollCtrl">
        <p><button ng-click="addItem()">Add</button> <button ng-click="removeItem()">Remove</button></p>

        <perfect-scrollbar class="scroller" wheel-propagation="true" wheel-speed="50" handlers="['wheel', 'touch']" theme="'my-theme'" swipe-propagation="true" refresh-on-change="someArray" on-scroll="onScroll(scrollTop, scrollHeight)">
            <div ng-repeat="times in someArray">
                {{times}}. Lorem ipsum dolor sit amet, consectetur adipiscing elit. Vestibulum eleifend lectus et nunc congue gravida. Phasellus et iaculis risus, ut scelerisque dolor. Sed diam diam, tempor et feugiat a, pharetra sed nulla. Duis non lacinia odio, vitae
                ultricies dui. Ut sit amet dui quis lectus cursus laoreet et in magna. Nulla rutrum nisi urna, sit amet faucibus felis placerat ac. Cras commodo aliquam purus, eget gravida magna lacinia non. Sed facilisis, eros iaculis rhoncus adipiscing,
                dolor augue fermentum risus, vel vulputate massa metus ac erat. Pellentesque libero justo, pellentesque non neque a, ultricies eleifend lectus. Aenean a nisl mauris. Aliquam erat volutpat. Nulla et viverra nisi, sit amet venenatis leo.
                Quisque aliquam sed leo eu pretium. Maecenas a lobortis lacus. Aenean lacinia scelerisque aliquam. Vestibulum pretium consequat enim at lacinia. Suspendisse pretium nulla quis lacus accumsan consectetur. In hac habitasse platea dictumst.
                In risus ipsum, facilisis sit amet scelerisque imperdiet, vulputate ac erat. Quisque sed ipsum ornare, euismod quam vel, eleifend metus. Praesent ut fermentum augue. Sed sodales mollis arcu. Etiam quis erat dignissim, posuere tortor at,
                ullamcorper orci. Integer sodales, lectus a venenatis scelerisque, ipsum augue tempus augue, non vulputate nibh nunc ac est. Vestibulum accumsan arcu ut semper dapibus. Fusce mattis turpis et ante adipiscing, a mattis ipsum vestibulum.
                Aliquam non eros lobortis augue dapibus consectetur. Praesent sit amet nulla eu ligula elementum dapibus. Quisque id sapien vel neque malesuada cursus non dictum enim. Nam tincidunt eu ante ut imperdiet. Sed odio erat, mattis non leo eget,
                varius ultricies ipsum. Nulla porta est eu eros interdum dapibus. Sed a odio nisi. Sed eu vestibulum neque. Ut luctus risus nulla. Aenean dignissim porta sem, vitae dictum turpis iaculis a. Integer purus purus, dictum vitae consectetur
                sed, sollicitudin at enim. Cras sed nunc eget eros dapibus placerat. Fusce suscipit, nulla id elementum euismod, velit elit tincidunt leo, non bibendum magna nisl a diam. Donec lorem enim, tristique sed mi et, mollis luctus risus. In rutrum
                a magna non cursus. Duis malesuada varius elit eu hendrerit. Vivamus sed consequat augue. Proin ligula lectus, lacinia eu elementum sed, lacinia a nisi. Vestibulum porttitor gravida lectus vitae cursus. Sed mauris orci, aliquam in sodales
                vel, consectetur vitae dui. Phasellus auctor sollicitudin massa sed imperdiet. Nulla venenatis nisl molestie, consectetur metus eget, luctus lorem. Nullam blandit ut felis id consequat. Aliquam semper accumsan condimentum. Donec eu sodales
                mauris. Phasellus sagittis tellus sit amet purus venenatis, pellentesque convallis tellus porttitor. Etiam dictum dui nec adipiscing tincidunt. Curabitur viverra pretium est. Maecenas ligula purus, faucibus vitae mauris et, suscipit imperdiet
                tellus. Ut id feugiat lacus. Vivamus sed orci posuere, convallis nunc at, volutpat felis. Sed gravida libero nibh, nec mattis tortor tempus vel.
            </div>
        </perfect-scrollbar>

        <p>scrollTop: {{scrollTop}}<br />scrollHeight: {{scrollHeight}}</p>

        <script>
            angular
                .module('myApp', ['perfect_scrollbar'])

                .controller('ScrollCtrl', function($scope) {
                    $scope.someArray = [1, 2, 3];

                    $scope.addItem = function() {
                        var arrayLength = $scope.someArray.length;
                        var nextValue = arrayLength > 0 ? $scope.someArray[arrayLength - 1] + 1 : 1;
                        $scope.someArray.push(nextValue);
                    };

                    $scope.removeItem = function() {
                        if ($scope.someArray.length) {
                            $scope.someArray.pop();
                        }
                    }

                    $scope.scrollTop = 0
                    $scope.scrollHeight = 0

                    $scope.onScroll = function(scrollTop, scrollHeight) {
                        $scope.scrollTop = scrollTop
                        $scope.scrollHeight = scrollHeight
                    }
                });

        </script>
    </body>

</html>
